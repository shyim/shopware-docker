#!/usr/bin/env bash

FILE="$0"

if [[ -L "$0" ]]; then
  FILE="$(readlink ${0})"
fi

DIR="$(dirname ${FILE})"
export DIR="${DIR}"
source "${DIR}/.env"
source "${DIR}/functions.sh"

# Need to be in docker folder for docker-compose
cd "${DIR}"

if [[ -f "./modules/base/${1}.sh" ]];
then
    source "./modules/base/${1}.sh"
    exit "0"
fi

if [[ -f "./modules/local/${1}.sh" ]];
then
    source "./modules/local/${1}.sh"
    exit "0"
fi

docker-compose exec cli bash /opt/swdc/swdc-inside "$@"
